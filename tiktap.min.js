function Tiktap(selector,options={}){this.contain=document.querySelector(selector);if(!this.contain){console.error(`Tiktap: No container found for selector '${selector}'!`);return}this.tabs=Array.from(this.contain.querySelectorAll("li a"));if(!this.tabs.length){console.error(`Tiktap: No tabs found inside the container!`);return}this.panels=this.getPanels();if(this.panels.length!==this.tabs.length)return;this.opt=Object.assign({activeClassName:"tiktap--active",remember:false,onChange:null},options);this._originalHTML=this.contain.innerHTML;this._cleanRegex=/[^a-zA-Z0-9]/g;this.paramKey=selector.replace(this._cleanRegex,"");this._init()}Tiktap.prototype.getPanels=function(){return this.tabs.map(tab=>{const panel=document.querySelector(tab.getAttribute("href"));if(!panel){console.error(`Tiktap: No panel found for selector '${tab.getAttribute("href")}'`)}return panel}).filter(Boolean)};Tiktap.prototype._init=function(){const params=new URLSearchParams(location.search);const tabSelector=params.get(`${this.paramKey}`);const tab=this.opt.remember&&tabSelector&&this.tabs.find(tab=>tab.getAttribute("href").replace(this._cleanRegex,"")===tabSelector)||this.tabs[0];this.currentTab=tab;this._activateTab(tab,false,false);this.tabs.forEach(tab=>{tab.onclick=event=>this._handleTabClick(event,tab)})};Tiktap.prototype._handleTabClick=function(event,tab){event.preventDefault();this._tryActivateTab(tab)};Tiktap.prototype._tryActivateTab=function(tab){if(this.currentTab!==tab){this.currentTab=tab;this._activateTab(tab)}};Tiktap.prototype._activateTab=function(tab,triggerOnChange=true,updateURL=this.opt.remember){this.tabs.forEach(tab=>tab.closest("li").classList.remove(this.opt.activeClassName));tab.closest("li").classList.add(this.opt.activeClassName);this.panels.forEach(panel=>panel.hidden=true);const panelActive=document.querySelector(tab.getAttribute("href"));panelActive.hidden=false;if(updateURL){const params=new URLSearchParams(location.search);params.set(this.paramKey,tab.getAttribute("href").replace(this._cleanRegex,""));history.replaceState(null,null,`?${params}`)}if(triggerOnChange&&typeof this.opt.onChange==="function"){this.opt.onChange({tab:tab,panel:panelActive})}};Tiktap.prototype.switch=function(input){let tabToActivate=null;if(typeof input==="string"){tabToActivate=this.tabs.find(tab=>tab.getAttribute("href")===input);if(!tabToActivate){console.error(`Tiktap: No panel found with ID '${input}'`);return}}else if(this.tabs.includes(input)){tabToActivate=input}if(!tabToActivate){console.error(`Tiktap: Invalid input '${input}'`);return}this._tryActivateTab(tabToActivate)};Tiktap.prototype.destroy=function(){this.contain.innerHTML=this._originalHTML;this.panels.forEach(panel=>panel.hidden=false);this.contain=null;this.tabs=null;this.panels=null;this.currentTab=null};